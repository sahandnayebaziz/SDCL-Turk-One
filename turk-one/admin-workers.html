<template name="adminWorkers">
	<div class="row">
		<div class="col-sm-12 top-buffer-25">
			<table class="table table-sm table-bordered table-striped">
				<thead>
				<tr>
					<th>worker</th>
					<th>session</th>
					<th># of solutions</th>
					<th>decision point</th>
					<th># accepted</th>
					<th>actions</th>
				</tr>
				</thead>
				<tbody>
				{{#each workerTickets}}
					{{> workerTicketRow}}
				{{/each}}
				</tbody>
			</table>
		</div>
	</div>
</template>
<template name="workerTicketRow">
	<tr>
		<td>{{workerId}}</td>
		<td>{{sessionId}}</td>
		<td>{{numberOfSolutionsComplexEnough}}</td>
		<td>{{decisionPointId}}</td>
		{{#if reviewed}}
			<td>{{numberOfSolutionsAccepted}}</td>
		{{else}}
			<td></td>
		{{/if}}
		<td>
			<a href="/worker/{{_id}}" class="btn btn-sm btn-primary">review</a>
			<button class="btn btn-sm btn-danger" data-toggle="modal" data-target="#modal{{_id}}">delete</button>
		</td>
	</tr>

	<!--delete modal-->
	<div class="modal fade" id="modal{{_id}}" tabindex="-1" role="dialog" aria-labelledby="modal{{_id}}"
	     aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
						<span class="sr-only">Close</span>
					</button>
					<h4 class="modal-title" id="myModalLabel">Are you sure?</h4>
				</div>
				<div class="modal-body text-danger">
					You are about to delete the worker ticket for worker {{workerId}}.
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-dismiss="modal">cancel</button>
					<button type="button" class="btn btn-danger delete">delete</button>
				</div>
			</div>
		</div>
	</div>
</template>

<template name="worker">
	<div class="container top-buffer-100">
		<div class="row bottom-buffer-50">
			<div class="col-xs-12">
				<a href="/admin"><strong>Back to admin</strong></a>
			</div>
		</div>
		<div class="row">
			<div class="col-xs-5">
				<ul class="list-group">
					<li class="list-group-item"><span class="text-muted">ticket: </span> {{_id}}</li>
					<li class="list-group-item"><span class="text-muted">worker: </span>{{workerId}}</li>
					<li class="list-group-item"><span class="text-muted">session: </span>{{sessionId}}</li>
					<li class="list-group-item"><span class="text-muted">decision point: </span>{{decisionPoint.name}}</li>
					<li class="list-group-item"><span class="text-muted"># of solutions: </span>{{numberOfSolutionsComplexEnough}}
					</li>
					<li class="list-group-item"><span class="text-muted">reviewed: </span>{{reviewed}}</li>
				</ul>
			</div>
		</div>
		<div class="row top-buffer-50">
			<div class="col-xs-12">
				<ul class="list-group">
					{{#each solutions}}
						<li class="list-group-item">
							<div class="row">
								<div class="col-xs-12">
									<p><span class="text-muted">name: </span> {{name}}</p>
									<p><span class="text-muted">explanation: </span> {{explain}}</p>
								</div>
							</div>
						</li>
					{{/each}}
				</ul>
			</div>
		</div>
	</div>
</template>