<template name="home">
	<script>
		homeStopwatch = new Stopwatch();
		homeStopwatch.start();

		idleTime = 0;
		var idleInterval = setInterval(timerIncrement, 1000); // every second
		$(this).mousemove(function (e) {
			idleTime = 0;
		}); // reset the timer
		$(this).keypress(function (e) {
			idleTime = 0;
		});  // reset the timer
		function timerIncrement() {
			idleTime = idleTime + 1;
			if (idleTime > 120) { // after 2 minutes
				homeStopwatch.reset();
			}
		}

		w = "{{workerId}}";
		var s = "{{sessionId}}";
		var d = "{{decisionPointId}}";
		var v = new Date();
		if (Session.get("ticketedFor" + w)) {
			Session.setPersistent("ticket", Session.get("ticketedFor" + w));
			console.log("ticket exists and was set");
		} else {
			Meteor.call("createWorkerTicketId", w, s, d, v, function(e, r){
				if (e) {
					console.log(e);
				} else {
					// examine result
					Session.setPersistent("ticket", r);
					Session.setPersistent("ticketedFor" + w, r);
					Session.setPersistent("tutorialDone", false);
					Session.setPersistent("tipsToggled", false);
					console.log("made new ticket");
				}
			});
		}
	</script>

	<div class="container-fluid">
		<div class="row">
			<div class="col-md-10 col-md-offset-1 col-sm-12">
				<div class="top-buffer-150 bottom-buffer-150">
					<div class="row">
						<div class="col-sm-12 col-md-4">
							<p class="lead">
								MTurk CrowdDesign HIT
							</p>
						</div>
						<div class="col-sm-12 col-md-8">
							<h5>
								Educational Traffic Flow Simulation Program
							</h5>

							<p><br>You are part of a team of software developers who are working together to design a traffic flow
								simulator
								program. The overall purpose of the simulator program is educational: university-level civil engineering
								students
								will be using it to understand the effects that different traffic signal timings have on traffic flow.
							</p>

							<p class="small">The overall design problem has already been broken down into a large number of much
								smaller
								decision points: individual aspects of the design that can be considered in isolation of each other. You
								have been tasked with working on one of those decision points, by providing one or more alternative
								solutions
								that would satisfactorily address the requirements of that decision point.<br><br>
								<span>{{decisionPointText}}</span>
							</p>

							{{> criteria}}

							<a type="button" class="btn btn-primary btn-continue top-buffer-50"><span
								class="small">CONTINUE</span></a>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

</template>

<template name="criteria">
	<p class="small"><span class="text-muted small strong"><strong>ACCEPTION CRITERIA</strong></span><br>
		In order for your task to be accepted you need to provide at least one alternative solution that meets
		the following criteria:
	<ul class="small">
		<li>It is specified in English</li>
		<li>It has a sketch, name, and textual explanation.</li>
		<li>It shows honest effort to propose a solution that solves the decision point</li>
	</ul>
	</p>
	<p class="small">For each solution you provide, that meets this criteria, you will be awarded a bonus of $0.50 on top of the $1.00 completion fee.
		You can only take this HIT once; unfortunately we have to reject workers that submit this HIT multiple times. </p>

	<p class="small"><span class="text-muted small strong"><strong>BONUS CRITERIA</strong></span><br>
		If you provide relevant solution alternatives, you will be awarded a bonus of $1.50 per solution (instead of $0.50)
		that meets the following criteria:
	<ul class="small">
		<li>It is specified in English</li>
		<li>It has a proper name and textual explanation</li>
		<li>It has a sensible accompanying sketch that shows the alternative solution</li>
		<li>It is relevant to the decision point</li>
	</ul>
	</p>
</template>